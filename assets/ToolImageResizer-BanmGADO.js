import{Q as B}from"./QFile-C4i9HaXa.js";import{u as S}from"./vue-i18n.runtime-dVZWppTj.js";import{r as u,a as f,_ as U,N as m,G as d,M as n,J as D,I as g,L as o,z as M,T as V}from"./index-BhR0WcmR.js";import"./format-2CO7JL6p.js";import"./Ripple-tJgUjR42.js";import"./QSpinner-BUy009jF.js";import"./render-DQddtyOB.js";import"./dom-nElX5PBv.js";import"./use-dark-B6k9J0c7.js";import"./use-file-dom-props-Bgcd2o_i.js";const j={setup(){const{t:h,locale:c}=S(),s=u(null),e=u(null),R=u(null),v=u(100),t=u(null),z=u(null),I=u(null),_=u(null),w=l=>{if(l===null)return null;const i=["B","KB","MB","GB"];let a=l,r=0;for(;a>=1024&&r<i.length-1;)a/=1024,r+=1;const p=a>=10||r===0?0:1;return`${a.toFixed(p)} ${i[r]}`},F=l=>{const i=l.indexOf(",");if(i===-1)return 0;const a=l.slice(i+1),r=a.match(/=+$/)?.[0].length??0;return Math.max(0,Math.floor(a.length*3/4)-r)},b=f(()=>{const l=t.value,i=z.value;if(l===null||i===null)return null;const a=Math.max(1,v.value)/100;return{width:Math.max(1,Math.round(l*a)),height:Math.max(1,Math.round(i*a))}}),L=f(()=>t.value===null||z.value===null?null:h("tools.imageResizer.dimensions",{width:t.value,height:z.value})),x=f(()=>b.value?h("tools.imageResizer.dimensions",{width:b.value.width,height:b.value.height}):null),y=f(()=>{const l=w(I.value);return l?h("tools.imageResizer.fileSize",{size:l}):null}),k=f(()=>{const l=w(_.value);return l?h("tools.imageResizer.resizedFileSize",{size:l}):null});return{t:h,locale:c,originalImage:s,resizedImage:e,selectedFile:R,scalePercent:v,originalDimensionsLabel:L,resizedDimensionsLabel:x,originalFileSizeLabel:y,resizedFileSizeLabel:k,handleFileUpload:l=>{if(s.value&&URL.revokeObjectURL(s.value),!l){s.value=null,I.value=null,t.value=null,z.value=null,v.value=100,e.value=null,_.value=null;return}s.value=URL.createObjectURL(l),I.value=l.size,t.value=null,z.value=null,v.value=100,e.value=null,_.value=null;const i=new Image;i.onload=()=>{t.value=i.naturalWidth||i.width,z.value=i.naturalHeight||i.height},i.src=s.value},resizeImage:()=>{if(!s.value)return;const l=new Image;l.src=s.value,l.onload=()=>{const i=b.value;if(!i)return;const a=document.createElement("canvas"),r=a.getContext("2d");a.width=i.width,a.height=i.height,r&&(r.drawImage(l,0,0,i.width,i.height),e.value=a.toDataURL("image/jpeg"),_.value=F(e.value))}}}}},N={key:0,class:"image-preview"},T=["src","alt"],C={key:0,class:"image-meta"},O={key:1,class:"image-meta"},P={key:1,class:"image-preview"},E=["src","alt"],G={key:0,class:"image-meta"},H={key:1,class:"image-meta"},Q=["href"],W={key:2,class:"resize-controls"},J={for:"scale"};function K(h,c,s,e,R,v){return d(),m("div",{id:"app",key:e.locale},[n("h1",null,o(e.t("tools.imageResizer.title")),1),D(B,{modelValue:e.selectedFile,"onUpdate:modelValue":[c[0]||(c[0]=t=>e.selectedFile=t),e.handleFileUpload],accept:"image/*",outlined:"",color:"primary",label:e.t("tools.imageResizer.upload"),"no-files-label":e.t("tools.imageResizer.noFile")},null,8,["modelValue","label","no-files-label","onUpdate:modelValue"]),e.originalImage?(d(),m("div",N,[n("h3",null,o(e.t("tools.imageResizer.original")),1),n("img",{src:e.originalImage,alt:e.t("tools.imageResizer.original")},null,8,T),e.originalDimensionsLabel?(d(),m("p",C,o(e.originalDimensionsLabel),1)):g("",!0),e.originalFileSizeLabel?(d(),m("p",O,o(e.originalFileSizeLabel),1)):g("",!0)])):g("",!0),e.resizedImage?(d(),m("div",P,[n("h3",null,o(e.t("tools.imageResizer.resized")),1),n("img",{src:e.resizedImage,alt:e.t("tools.imageResizer.resized")},null,8,E),e.resizedDimensionsLabel?(d(),m("p",G,o(e.resizedDimensionsLabel),1)):g("",!0),e.resizedFileSizeLabel?(d(),m("p",H,o(e.resizedFileSizeLabel),1)):g("",!0),n("a",{href:e.resizedImage,download:"resized-image.jpg"},[n("button",null,o(e.t("tools.imageResizer.download")),1)],8,Q)])):g("",!0),e.originalImage?(d(),m("div",W,[n("label",J,o(e.t("tools.imageResizer.scale")),1),M(n("input",{type:"number",id:"scale","onUpdate:modelValue":c[1]||(c[1]=t=>e.scalePercent=t),min:"1",step:"1"},null,512),[[V,e.scalePercent]]),n("button",{onClick:c[2]||(c[2]=(...t)=>e.resizeImage&&e.resizeImage(...t))},o(e.t("tools.imageResizer.resize")),1)])):g("",!0)])}const oe=U(j,[["render",K]]);export{oe as default};
