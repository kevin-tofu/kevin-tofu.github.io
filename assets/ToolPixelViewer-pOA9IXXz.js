import{Q as I}from"./Ripple-tJgUjR42.js";import{Q as B}from"./QFile-C4i9HaXa.js";import{c as C,g as R,a as b,h as p,E as Q,r as f,w as U,_ as $,N as x,G as _,M as d,I as D,J as g,H as q,L}from"./index-BhR0WcmR.js";import{u as M,a as N}from"./use-dark-B6k9J0c7.js";import{h as w}from"./render-DQddtyOB.js";import{u as S}from"./vue-i18n.runtime-dVZWppTj.js";import"./QSpinner-BUy009jF.js";import"./dom-nElX5PBv.js";import"./format-2CO7JL6p.js";import"./use-file-dom-props-Bgcd2o_i.js";const j=C({name:"QBanner",props:{...M,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:n}){const{proxy:{$q:t}}=R(),u=N(e,t),l=b(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(u.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),m=b(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const o=[p("div",{class:"q-banner__avatar col-auto row items-center self-start"},w(n.avatar)),p("div",{class:"q-banner__content col text-body2"},w(n.default))],a=w(n.action);return a!==void 0&&o.push(p("div",{class:m.value},a)),p("div",{class:l.value+(e.inlineActions===!1&&a!==void 0?" q-banner--top-padding":""),role:"alert"},o)}}}),A=Q({name:"PixelViewer",setup(){const{t:e}=S(),n=f(null),t=f(null),u=f(null),l=f(null),m=b(()=>l.value?e("tools.pixelViewer.message",{x:l.value.x,y:l.value.y,r:l.value.r,g:l.value.g,b:l.value.b}):e("tools.pixelViewer.prompt")),o=new Image;let a=null;function y(s){n.value=s}U(n,s=>{u.value&&URL.revokeObjectURL(u.value),l.value=null,s&&(u.value=URL.createObjectURL(s),V())});function V(){o.onload=function(){t.value&&(a=t.value.getContext("2d"));const s=800,c=600;let r=o.width,i=o.height;r>s&&(i=i*(s/r),r=s),i>c&&(r=r*(c/i),i=c),t.value&&(t.value.width=r,t.value.height=i,a&&a.drawImage(o,0,0,r,i))},u.value&&(o.src=u.value)}function k(s){if(!a||!t.value)return;const c=t.value.getBoundingClientRect(),r=s.clientX-c.left,i=s.clientY-c.top;a.clearRect(0,0,t.value.width,t.value.height),a.drawImage(o,0,0,t.value.width,t.value.height);const h=a.getImageData(r,i,1,1).data;l.value={x:Math.round(r),y:Math.round(i),r:h[0]??0,g:h[1]??0,b:h[2]??0};const v=10;a.strokeStyle="red",a.lineWidth=2,a.strokeRect(r-v/2,i-v/2,v,v)}return{model:n,canvas:t,urlmodel:u,message:m,t:e,event_cursor:k,event_file:y}}}),P={class:"q-pa-md"},E={class:"q-gutter-y-md column",style:{"max-width":"300px"}},H={key:0,class:"q-pa-md q-gutter-sm"},O={style:{overflow:"auto","max-width":"100%","max-height":"600px"}},W={class:"q-pa-md q-gutter-sm"};function z(e,n,t,u,l,m){return _(),x("div",P,[d("div",E,[g(B,{color:"grey-3",outlined:"","label-color":"orange",modelValue:e.model,"onUpdate:modelValue":[n[0]||(n[0]=o=>e.model=o),e.event_file],label:e.t("tools.pixelViewer.upload")},{append:q(()=>[g(I,{name:"attachment",color:"orange"})]),_:1},8,["modelValue","label","onUpdate:modelValue"])]),e.model?(_(),x("div",H,[d("div",O,[d("canvas",{ref:"canvas",onMousemove:n[1]||(n[1]=(...o)=>e.event_cursor&&e.event_cursor(...o))},null,544)])])):D("",!0),d("div",W,[g(j,{dense:"",class:"bg-primary text-white"},{default:q(()=>[d("h6",null,L(e.message),1)]),_:1})])])}const ae=$(A,[["render",z]]);export{ae as default};
